<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Procviƒçov√°n√≠ navij≈°tiny</title>

<style>
:root {
    --bg: #ffffff;
    --text: #000000;
    --card: #f0f0f0;
}
body.dark {
    --bg: #121212;
    --text: #eaeaea;
    --card: #1e1e1e;
}
body {
    background: var(--bg);
    color: var(--text);
    font-family: Arial, sans-serif;
    text-align: center;
    transition: 0.3s;
}
#word-container {
    font-size: 26px;
    margin: 20px;
    background: var(--card);
    padding: 15px;
    border-radius: 10px;
}
.correct { color: #2ecc71; }
.incorrect { color: #e74c3c; }
button, select, input {
    padding: 8px;
    margin: 5px;
    border-radius: 6px;
    border: none;
}
#timer, #lives { margin: 5px; }
</style>
</head>

<body>

<h1>Procviƒçov√°n√≠ navijsk√Ωch slov√≠ƒçek</h1>

<button onclick="toggleTheme()">üåô / ‚òÄÔ∏è</button><br>

<select id="mode" onchange="startQuiz()">
    <option value="learn">Re≈æim uƒçen√≠</option>
    <option value="test">Re≈æim test</option>
</select>

<div id="timer"></div>
<div id="lives"></div>

<div id="word-container"></div>
<input type="text" id="answer" placeholder="Zadej ƒçesk√Ω p≈ôeklad">
<button onclick="checkAnswer()">Odeslat</button>

<div id="result"></div>
<div id="score"></div>

<button id="restartBtn" onclick="startQuiz()" style="display:none;">Opakovat v≈°e</button>
<button id="mistakeBtn" onclick="repeatMistakes()" style="display:none;">Opakovat chyby</button>

<script>
/* === V≈†ECHNA SLOV√çƒåKA === */
const allWords = [
    { cz: "Kaltx√¨", es: "Ahoj" },
    { cz: "Irayo", es: "Dƒõkuji" },
    { cz: "Rutxe", es: "Pros√≠m" },
    { cz: "Oel ngati kameie", es: "Vid√≠m tƒõ" },
    { cz: "K√¨yevame", es: "Nashledanou" },
    { cz: "Ngaru lu fpom srak", es: "M√°≈° se dob≈ôe?" },

    { cz: "oe", es: "j√°" },
    { cz: "nga", es: "ty" },
    { cz: "po", es: "on/ona" },
    { cz: "tsaw", es: "to" },

    { cz: "oeng", es: "my dva" },
    { cz: "menga", es: "vy dva" },
    { cz: "mefo", es: "oni dva" },

    { cz: "pxoeng", es: "my t≈ôi" },
    { cz: "pxenga", es: "vy t≈ôi" },

    { cz: "awnga", es: "my v≈°ichni" },
    { cz: "aynga", es: "vy v≈°ichni" },
    { cz: "ayfo", es: "oni" },

    { cz: "Tute", es: "Osoba" },
    { cz: "Nantang", es: "Zmije" },
    { cz: "Ikran", es: "Ikran" },
    { cz: "Utral", es: "Strom" },
    { cz: "Na‚Äôr√¨ng", es: "Les" },
    { cz: "Kelku", es: "Domov" },

    { cz: "Layon", es: "ƒåern√°" },
    { cz: "Ean", es: "Modr√° / Zelen√°" },
    { cz: "Tun", es: "ƒåerven√°" },
    { cz: "Rim", es: "≈Ωlut√°" },
    { cz: "Teyr", es: "B√≠l√°" },

    { cz: "Lu", es: "B√Ωt" },
    { cz: "Taron", es: "Lovit" },

    { cz: "S√¨", es: "A" },
    { cz: "Srak", es: "Otazn√≠k" }
];

let words = [];
let mistakes = [];
let correct = 0;
let lives = 3;
let timer, timeLeft = 3;
let currentWord;

/* === FUNKCE === */
const normalize = t =>
    t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").trim();

const shuffle = a => a.sort(() => Math.random() - 0.5);

function startQuiz(custom) {
    words = shuffle(custom ? [...custom] : [...allWords]);
    mistakes = [];
    correct = 0;
    lives = 3;
    clearInterval(timer);

    score.innerHTML = "";
    result.textContent = "";
    restartBtn.style.display = "none";
    mistakeBtn.style.display = "none";

    nextWord();
}

function nextWord() {
    clearInterval(timer);
    if (!words.length || lives <= 0) return endQuiz();

    currentWord = words.pop();
    word_container.textContent = currentWord.cz;
    answer.value = "";
    answer.dataset.correct = currentWord.es;

    if (mode.value === "test") startTimer();
    updateUI();
}

function startTimer() {
    timeLeft = 3;
    timer = setInterval(() => {
        timeLeft--;
        updateUI();
        if (timeLeft <= 0) registerMistake("Vypr≈°el ƒças!");
    }, 1000);
}

function checkAnswer() {
    clearInterval(timer);
    if (normalize(answer.value) === normalize(answer.dataset.correct)) {
        correct++;
        result.textContent = "Spr√°vnƒõ!";
        result.className = "correct";
        setTimeout(nextWord, 700);
    } else {
        registerMistake("≈†patnƒõ!");
    }
}

function registerMistake(msg) {
    mistakes.push(currentWord);
    result.textContent = msg;
    result.className = "incorrect";
    if (mode.value === "test") lives--;
    setTimeout(nextWord, 1000);
}

function endQuiz() {
    const percent = Math.round((correct / allWords.length) * 100);
    word_container.textContent = "Hotovo!";
    score.innerHTML = `Spr√°vnƒõ: ${correct} / ${allWords.length}<br>√öspƒõ≈°nost: ${percent}%`;
    restartBtn.style.display = "inline";
    if (mistakes.length) mistakeBtn.style.display = "inline";
}

function repeatMistakes() {
    startQuiz(mistakes);
}

function toggleTheme() {
    document.body.classList.toggle("dark");
    localStorage.theme = document.body.classList.contains("dark") ? "dark" : "light";
}

function updateUI() {
    livesDiv.textContent = mode.value === "test" ? `‚ù§Ô∏è ${lives}` : "";
    timerDiv.textContent = mode.value === "test" ? `‚è±Ô∏è ${timeLeft}` : "";
}

/* === INIT === */
if (localStorage.theme === "dark") document.body.classList.add("dark");
answer.addEventListener("keydown", e => e.key === "Enter" && checkAnswer());
startQuiz();
</script>

</body>
</html>
