<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Procviƒçov√°n√≠ navij≈°tiny</title>

<style>
:root {
    --bg: #ffffff;
    --text: #000000;
    --card: #f0f0f0;
}
body.dark {
    --bg: #121212;
    --text: #eaeaea;
    --card: #1e1e1e;
}
body {
    background: var(--bg);
    color: var(--text);
    font-family: Arial, sans-serif;
    text-align: center;
}
#word-container {
    font-size: 26px;
    margin: 20px;
    background: var(--card);
    padding: 15px;
    border-radius: 10px;
}
.correct { color: green; }
.incorrect { color: red; }
button, select, input {
    padding: 8px;
    margin: 5px;
    border-radius: 6px;
}
</style>
</head>

<body>

<h1>Procviƒçov√°n√≠ navijsk√Ωch slov√≠ƒçek</h1>

<button onclick="toggleTheme()">üåô / ‚òÄÔ∏è</button><br>

<select id="mode" onchange="startQuiz()">
    <option value="learn">Re≈æim uƒçen√≠</option>
    <option value="test">Re≈æim test</option>
</select>

<div id="timer"></div>
<div id="lives"></div>

<div id="word-container"></div>

<input type="text" id="answer" placeholder="Zadej ƒçesk√Ω p≈ôeklad">
<button onclick="checkAnswer()">Odeslat</button>

<div id="result"></div>
<div id="score"></div>

<button id="restartBtn" onclick="startQuiz()" style="display:none;">Opakovat v≈°e</button>
<button id="mistakeBtn" onclick="repeatMistakes()" style="display:none;">Opakovat chyby</button>

<script>
/* === SLOV√çƒåKA === */
const allWords = [
    { cz: "Kaltx√¨", es: "Ahoj" },
    { cz: "Irayo", es: "Dƒõkuji" },
    { cz: "Rutxe", es: "Pros√≠m" },
    { cz: "Oel ngati kameie", es: "Vid√≠m tƒõ" },
    { cz: "K√¨yevame", es: "Nashledanou" },
    { cz: "Ngaru lu fpom srak", es: "M√°≈° se dob≈ôe?" },
    { cz: "oe", es: "j√°" },
    { cz: "nga", es: "ty" },
    { cz: "po", es: "on/ona" },
    { cz: "tsaw", es: "to" },
    { cz: "oeng", es: "my dva" },
    { cz: "menga", es: "vy dva" },
    { cz: "mefo", es: "oni dva" },
    { cz: "pxoeng", es: "my t≈ôi" },
    { cz: "pxenga", es: "vy t≈ôi" },
    { cz: "awnga", es: "my v≈°ichni" },
    { cz: "aynga", es: "vy v≈°ichni" },
    { cz: "ayfo", es: "oni" },
    { cz: "Tute", es: "Osoba" },
    { cz: "Nantang", es: "Zmije" },
    { cz: "Ikran", es: "Ikran" },
    { cz: "Utral", es: "Strom" },
    { cz: "Na‚Äôr√¨ng", es: "Les" },
    { cz: "Kelku", es: "Domov" },
    { cz: "Layon", es: "ƒåern√°" },
    { cz: "Ean", es: "Modr√° / Zelen√°" },
    { cz: "Tun", es: "ƒåerven√°" },
    { cz: "Rim", es: "≈Ωlut√°" },
    { cz: "Teyr", es: "B√≠l√°" },
    { cz: "Lu", es: "B√Ωt" },
    { cz: "Taron", es: "Lovit" },
    { cz: "S√¨", es: "A" },
    { cz: "Srak", es: "Otazn√≠k" }
];

/* === PROMƒöNN√â === */
let words = [];
let mistakes = [];
let correct = 0;
let lives = 3;
let timer = null;
let timeLeft = 3;
let currentWord;

/* === FUNKCE === */
function normalize(text) {
    return text.toLowerCase()
        .normalize("NFD")
        .replace(/[\u0300-\u036f]/g, "")
        .trim();
}

function shuffle(arr) {
    return arr.sort(() => Math.random() - 0.5);
}

function startQuiz(custom) {
    words = shuffle(custom ? [...custom] : [...allWords]);
    mistakes = [];
    correct = 0;
    lives = 3;
    clearInterval(timer);

    document.getElementById("score").innerHTML = "";
    document.getElementById("result").textContent = "";
    document.getElementById("restartBtn").style.display = "none";
    document.getElementById("mistakeBtn").style.display = "none";

    nextWord();
}

function nextWord() {
    clearInterval(timer);

    if (!words.length || lives <= 0) {
        endQuiz();
        return;
    }

    currentWord = words.pop();
    document.getElementById("word-container").textContent = currentWord.cz;
    document.getElementById("answer").value = "";
    document.getElementById("answer").dataset.correct = currentWord.es;

    if (document.getElementById("mode").value === "test") {
        startTimer();
    }
    updateUI();
}

function startTimer() {
    timeLeft = 3;
    document.getElementById("timer").textContent = `‚è±Ô∏è ${timeLeft}`;
    timer = setInterval(() => {
        timeLeft--;
        document.getElementById("timer").textContent = `‚è±Ô∏è ${timeLeft}`;
        if (timeLeft <= 0) {
            clearInterval(timer);
            registerMistake("Vypr≈°el ƒças!");
        }
    }, 1000);
}

function checkAnswer() {
    clearInterval(timer);
    const user = normalize(document.getElementById("answer").value);
    const correctAns = normalize(document.getElementById("answer").dataset.correct);

    if (user === correctAns) {
        correct++;
        document.getElementById("result").textContent = "Spr√°vnƒõ!";
        document.getElementById("result").className = "correct";
        setTimeout(nextWord, 700);
    } else {
        registerMistake("≈†patnƒõ!");
    }
}

function registerMistake(msg) {
    mistakes.push(currentWord);
    document.getElementById("result").textContent = msg;
    document.getElementById("result").className = "incorrect";
    if (document.getElementById("mode").value === "test") lives--;
    setTimeout(nextWord, 1000);
}

function endQuiz() {
    document.getElementById("word-container").textContent = "Hotovo!";
    const percent = Math.round((correct / allWords.length) * 100);
    document.getElementById("score").innerHTML =
        `Spr√°vnƒõ: ${correct} / ${allWords.length}<br>√öspƒõ≈°nost: ${percent}%`;
    document.getElementById("restartBtn").style.display = "inline";
    if (mistakes.length) document.getElementById("mistakeBtn").style.display = "inline";
}

function repeatMistakes() {
    startQuiz(mistakes);
}

function toggleTheme() {
    document.body.classList.toggle("dark");
    localStorage.theme = document.body.classList.contains("dark") ? "dark" : "light";
}

function updateUI() {
    document.getElementById("lives").textContent =
        document.getElementById("mode").value === "test" ? `‚ù§Ô∏è ${lives}` : "";
}

document.getElementById("answer").addEventListener("keydown", e => {
    if (e.key === "Enter") checkAnswer();
});

if (localStorage.theme === "dark") document.body.classList.add("dark");

startQuiz();
</script>

</body>
</html>
